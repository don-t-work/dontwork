<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>Don't Work</title>
    <link rel="stylesheet" href="assets/css/dashboard.css">
    <link href="http://fonts.cdnfonts.com/css/menlo" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script type="text/javascript">
      function download(filename, text) {
        var element = document.createElement('a');
        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
        element.setAttribute('download', filename);
        element.style.display = 'none';
        document.body.appendChild(element);
        element.click();
        document.body.removeChild(element);
      }

      function hasNumber(myString) {
        return /\d/.test(myString);
      }

      var inputState = false;
      function start() {
        if (inputState === false) {
          document.getElementById("textBox").className = "textBoxSlide_";
          document.getElementById("textUIContainer").className = "textUIContainerSlide_";
          document.getElementById("submitButton").style.display = "inline-block";
          document.getElementById("submitInfos").style.display = "inline-block";
          document.getElementById("submitButton").className = "submitButtonSlide_";
          document.getElementById("submitInfos").className = "submitInfosSlide_";
          setTimeout(function() {$('#start').html("<p>enregistrer</p>");}, 400)
          setTimeout(function() {inputState = true;}, 400)
        } else {
          var fileName = document.getElementById("fileNameTextArea").value;
          var fileContent = document.getElementById("textInputArea").value;

          if (/^[\w-]+$/.test(fileName)) {
            download(fileName+".txt",fileContent);
          }
        }
      }

      function updateSubmitButton() {
        var cssVars = getComputedStyle(document.body);
        if($("#textInputArea").val() == "" || $("#fileNameTextArea").val() == "") {
          $("#submitButton").css("backgroundColor",cssVars.getPropertyValue("--submitButton-bg-color"));
          $("#submitButton").css("color",cssVars.getPropertyValue("--submitButton-text-color"));

        } else {
          $("#submitButton").css("backgroundColor",cssVars.getPropertyValue("--submitButton-bg-color-validate"));
          $("#submitButton").css("color",cssVars.getPropertyValue("--submitButton-text-color-validate"));
        }
      }

      $(document).ready(function(){
        $("#textInputArea").keyup(function(){
          updateSubmitButton();
        });
        $("#fileNameTextArea").keyup(function(){
          updateSubmitButton();
        });
      });

      var storedTheme = localStorage.getItem('theme') || (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
      if (storedTheme) {
          document.documentElement.setAttribute('data-theme', storedTheme);
      }
    </script>
  </head>
  <body>
    <div id="mainContainer">
        <div id="menuTop"></div>
        <div id="menu">
          <div id="title"><h2>Don't work</h2></div>
          <div id="start" onclick="start()"><p>commencer</p></div>
        </div>
        <div id="subContainer">
          <div id="textUIContainer">
            <div id="textInput">
              <textarea id="textInputArea" name="text" placeholder="copiez-collez votre cours ici..."></textarea>
            </div>
            <div id="submitButton">
              <div id="submitButtonText"><h1 style="margin:0;">valider</h1></div>
            </div>
            <div id="submitInfos">
              <div id="infos">
                <div id="fileName">
                  <p id="fileNamePinv">Nom du fichier : </p>
                  <textarea id="fileNameTextArea" name="name" placeholder="FileName" maxlength=24 autocorrect="off"></textarea>
                  <p id="fileNamePext">.py</p>
                </div>
                <p style="margin:0;font-size:1.4em;font-weight: bold;">‚ö†Ô∏è important ‚ö†Ô∏è</p>
                <p style="margin:1.5% 0;">Afin de profiter d'une plus grande surface d'affichage et d'une meilleure lisibilit√©, veuillez regler la taille de police de votre calculatrice sur "petite"</p>
                <p style="margin:0;font-weight: bold;">Param√®tres > Police Python > Petite</p>
              </div>
            </div>
          </div>
          <div id="textBox">
            <h3>üõ†Ô∏è eertgyhuj</h3>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam est leo, iaculis at gravida in, pulvinar eu risus. Fusce sed blandit nisl. Aenean tincidunt dignissim mauris, vitae aliquam erat sollicitudin tempor. Nulla non faucibus dui. Nulla nulla eros, hendrerit quis ex et, condimentum feugiat libero. Pellentesque consequat tempor purus. Cras placerat ligula non elementum ullamcorper. In in erat convallis, rutrum turpis a, volutpat mi. Quisque in odio in velit mollis venenatis eget eget eros. Proin sagittis vulputate erat. Quisque sit amet tortor laoreet, commodo felis non, bibendum turpis. Nam auctor risus elementum ante eleifend ullamcorper. Pellentesque eu metus lacus. Donec imperdiet lorem ex. Donec euismod scelerisque felis, molestie ullamcorper augue semper in. Fusce condimentum dui sed nisl pretium hendrerit. Curabitur risus ante, cursus sit amet efficitur in, cursus vestibulum nunc. Ut vitae pharetra eros, eget consequat purus. Vivamus egestas sed risus ac tincidunt. Etiam ut mi blandit, porttitor mauris id, facilisis ex. Donec eu odio id elit tincidunt ultricies vitae et urna. Curabitur eu nulla eu velit dictum condimentum a vel justo. Praesent vestibulum justo non diam auctor, nec laoreet leo efficitur. Duis vel dui nec nisl venenatis commodo. Vivamus massa nisi, consequat ut dolor et, congue ornare orci. Nunc orci nisl, porttitor quis diam ac, interdum dignissim odio.
            </p>
          </div>
        </div>
    </div>
  </body>
</html>
